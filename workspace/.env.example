# Yatagarasu Workspace Environment Variables
# このファイルを .env としてコピーして、実際の値を設定してください

# =============================================================================
# go2rtc Settings
# =============================================================================
GO2RTC_HOST="localhost"
GO2RTC_API_PORT="1984"
GO2RTC_RTSP_PORT="8554"

# =============================================================================
# Tapo TC70 Camera Settings
# =============================================================================
# TapoカメラのIPアドレス
TAPO_HOST="192.168.0.xxx"

# Tapoアプリのユーザー名（admin固定）
TAPO_USER="admin"
# Tapoアプリのパスワード
TAPO_PASSWORD=""

# Tapoカメラのパスワード（Tapoアプリの「詳細設定」→「カメラアカウント」で作成）
TAPO_RTSP_USER="user"
TAPO_RTSP_PASSWORD=""

# =============================================================================
# Stream Settings
# =============================================================================
# デフォルトのストリーム名
STREAM="tapo_tc70"

# =============================================================================
# View Skill Settings (画像取得)
# =============================================================================
# 画像のデフォルトサイズ
WIDTH="640"
HEIGHT="480"

# JPEG品質 (1-100)
QUALITY="90"

# 画像保存先ディレクトリ
WORKSPACE_MEDIA="/home/<user>/yatagarasu/workspace/media"

# =============================================================================
# Speak Skill Settings (音声合成)
# =============================================================================
# デフォルトの話者ID
# 46: 小夜/SAYO
# 68: あいえるたん
# 0: 四国めたん
# 1: ずんだもん
SPEAKER_ID="68"

# VOICEVOXエンジン設定（音声合成）
VOICEVOX_ENGINE_HOST="127.0.0.1"
VOICEVOX_ENGINE_PORT="50021"

# =============================================================================
# Python Environment
# =============================================================================
# Pythonプロジェクトディレクトリ（Pytapo等を使用する場合）
PYTHON_DIR="/home/<user>/yatagarasu/python"

# =============================================================================
# listend Settings (音声認識)
# =============================================================================
# RTSP音声入力（go2rtc経由）
LISTEND_RTSP_URL="rtsp://localhost:8554/tapo_tc70"
# RTSPトランスポート（tcp / udp / auto）
# auto: tcp → udp の順に自動フォールバック（go2rtcはtcp推奨）
LISTEND_RTSP_TRANSPORT="tcp"

# Wake/Stopワード（カンマ区切り）
LISTEND_WAKE_WORDS="アマテラス,あまてらす,天照,雨テラス"
LISTEND_STOP_WORDS="ストップ"

# ウェイクワード検出時の即時フィードバック（Two-Passアプローチ）
# 検出時に「はい」等を発話してから、ONモードへ遷移
LISTEND_WAKE_PROMPT_WORD="はい"

# STTバックエンド（faster-whisper / reazonspeech-k2）
LISTEND_STT_BACKEND="faster-whisper"
# 共通言語設定（未指定時のデフォルト）
LISTEND_STT_LANGUAGE="ja"

# --- faster-whisper 設定 ---
# faster-whisperモデル
LISTEND_WHISPER_MODEL="base"
# Whisper計算方式（CPU低負荷化: int8 推奨）
LISTEND_WHISPER_COMPUTE_TYPE="int8"
# 言語（ja / auto）
LISTEND_WHISPER_LANGUAGE="ja"
# beam size（精度優先なら 3-5 に上げる）
LISTEND_WHISPER_BEAM_SIZE="3"

# --- ReazonSpeech k2 設定 ---
# LISTEND_STT_BACKEND="reazonspeech-k2" の場合に使用
# 言語:
#   ja    = 日本語
#   ja-en = 日英混在（英語を使いたい場合はこちら）
LISTEND_REAZON_LANGUAGE="ja"
LISTEND_REAZON_DEVICE="cpu"
# precision: int8 / fp16 / fp32
LISTEND_REAZON_PRECISION="int8"

# VAD閾値
LISTEND_VAD_THRESHOLD="0.5"

# 短すぎる発話セグメントは文字起こししない（負荷抑制）
LISTEND_MIN_SEGMENT_SEC="0.3"

# OFF状態の連続文字起こしを抑制するクールダウン（秒）
# 0 で無効
LISTEND_OFF_TRANSCRIBE_COOLDOWN_SEC="0"

# システム発話後のウェイクワード検知を抑制する時間（秒）
# 自分の発話を拾ってループするのを防ぐ
LISTEND_WAKE_SUPPRESSION_SEC="2"

# 1ターン確定の無音秒数（ウェイク後、この秒数無音ならYatagarasuへ渡す）
LISTEND_SESSION_END_SILENCE_SEC="3"

# ON状態をOFFへ戻す無音秒数
LISTEND_SILENCE_TIMEOUT_SEC="10"

# ffmpegから音声バイトが来ない場合の再接続タイムアウト（秒）
LISTEND_NO_DATA_TIMEOUT_SEC="10"
# 音声待機中のハートビートログ間隔（秒）
LISTEND_HEARTBEAT_SEC="10"

# ログレベル（DEBUGにすると認識チャンクやマッチ詳細を表示）
LISTEND_LOG_LEVEL="INFO"

# 認識テキストの受け渡し先（未指定なら <workspaceの親>/bin/yatagarasu）
LISTEND_DISPATCH_CMD=""
# yatagarasu 実行タイムアウト（秒）
LISTEND_DISPATCH_TIMEOUT_SEC="180"

# wake認識確認音声（未設定なら無効）
# 例: LISTEND_WAKE_ACK_WORD="はい、聞いてます"
LISTEND_WAKE_ACK_WORD="考えるね。"
# OFF遷移時の待機ワード（空文字で無効）
# LISTEND_STANDBY_WORD="待機します。"
LISTEND_STANDBY_WORD="待機します。"
# 未指定なら SPEAKER_ID を継承（それも未指定なら 68）
LISTEND_WAKE_ACK_SPEAKER_ID=""
# 認識確認音声のタイムアウト（秒）
LISTEND_WAKE_ACK_TIMEOUT_SEC="5"
# 実行コマンド（未指定なら <workspaceの親>/bin/zunda と /bin/tapovoice）
LISTEND_WAKE_ACK_ZUNDA_CMD=""
LISTEND_WAKE_ACK_TAPOVOICE_CMD=""

# =============================================================================
# Yatagarasu Settings
# =============================================================================
# デフォルトのClaudeモデル
# 利用可能なモデル: haiku, sonnet, opus
YATAGARASU_MODEL="haiku"

# 記憶機能の有効/無効
YATAGARASU_MEMORY_ENABLED="true"

# =============================================================================
# SemanticMemory (意味記憶) Settings
# =============================================================================
# SemanticMemory API
SEMANTIC_MEMORY_API_URL="http://localhost:6001/api"

# 関連知識取得件数（ベクトル検索、類似度順）
# ※ 両方同じ値にすることを推奨
# yatagarasuコマンドで使用 (recall-context.sh)
SEMANTIC_MEMORY_RECALL_LIMIT=3
# Skillsで使用 (recall.sh)
SEMANTIC_MEMORY_RECALL_DEFAULT_LIMIT=3

# 過去の文脈取得件数（時系列、最新順）
# yatagarasuコマンドで使用 (recall-context.sh)
SEMANTIC_MEMORY_RECENT_LIMIT=3

# 類似度閾値 0.0-1.0
SEMANTIC_MEMORY_RECALL_THRESHOLD=0.7