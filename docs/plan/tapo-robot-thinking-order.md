# Tapo Robot 検討順序ガイド v0.2

- 更新日: 2026-02-24
- 目的: 実装前に、決める順序を固定して手戻りを減らす

## Step 1 目的と境界を固定する

- 何を自動化するか（音声対話、見守り応答）
- 何をしないか（複数カメラ対応など）
- 成功条件（受け入れ条件）を決める

## Step 2 状態機械を先に決める

- `OFF/ON` と遷移条件（wake/sleep/無音timeout）
- 例外遷移（エラー時、再接続時）

## Step 3 トリガ契約を決める

- voice / motion / cron の共通イベント形式を決める
- イベントを受けたらどのプロンプトを使うか決める

## Step 4 スキル契約を決める

- `speak`, `move-camera`, `view`, `memory` の入出力を固定
- AIから呼ぶコマンドI/Fを固定

## Step 5 デプロイ境界を決める

- systemd と docker の役割分担
- 自動再起動、起動順序、監視ログ

## Step 6 設定と秘密情報の管理を決める

- `workspace/.env`（実体は `YATAGARASU_CWD/.env`）のキー定義
- 権限と運用手順

## Step 7 実装タスクに分解する

- 1タスク1責務で分ける
- 各タスクに回帰テストを必ず紐づける
