version: '3.8'

services:
  home-assistant:
    image: ghcr.io/home-assistant/home-assistant:stable
    container_name: ha
    restart: unless-stopped
    ports:
      - "8123:8123"
    volumes:
      - ./ha_config:/config
      - /etc/localtime:/etc/localtime:ro  # タイムゾーン同期（任意）
    environment:
      - TZ=Asia/Tokyo
    privileged: true  # デバイスアクセスが必要な場合（マイクなど、今回は不要かも）

#   go2rtc:
#     image: alexxit/go2rtc:latest
#     container_name: go2rtc
#     restart: unless-stopped
#     ports:
#       - "8554:8554"     # RTSP
#       - "1984:1984"     # Web UI (http://localhost:1984 で確認可能)
#       - "8555:8080"     # HTTP API / MJPEG など
#     volumes:
#       - ./go2rtc:/config  # ← ここ！ 設定ファイルをマウント
#       - <workspaceのディレクトリ>:/workspace  # ← ここにワークスペースをマウント
#     environment:
#       - TZ=Asia/Tokyo

# # 必要に応じてネットワークをhostに（WSL2でLANデバイスに確実に届くように）
# networks:
#   default:
#     driver: bridge